"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/scores";
exports.ids = ["pages/api/scores"];
exports.modules = {

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fscores&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fscores.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fscores&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fscores.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_scores_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/scores.ts */ \"(api-node)/./pages/api/scores.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_scores_ts__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_scores_ts__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/scores\",\n        pathname: \"/api/scores\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_scores_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGc2NvcmVzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlMkZhcGklMkZzY29yZXMudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ0U7QUFDMUQ7QUFDa0Q7QUFDbEQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLGlEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxpREFBUTtBQUNwQztBQUNPLHdCQUF3Qix5R0FBbUI7QUFDbEQ7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9zY29yZXMudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgJ2RlZmF1bHQnKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsICdjb25maWcnKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3Njb3Jlc1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Njb3Jlc1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6ICcnLFxuICAgICAgICBmaWxlbmFtZTogJydcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fscores&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fscores.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/scores.ts":
/*!*****************************!*\
  !*** ./pages/api/scores.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n\n\n// PrismaClient'ı global olarak tanımlayın\nlet prisma;\nif (false) {} else {\n    if (!global.prisma) {\n        global.prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\n    }\n    prisma = global.prisma;\n}\nconst JWT_SECRET = process.env.JWT_SECRET || 'your-secret-key';\n// Token doğrulama fonksiyonu\nconst verifyToken = (token)=>{\n    try {\n        jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(token, JWT_SECRET);\n        return true;\n    } catch  {\n        return false;\n    }\n};\n// API anahtarı kontrolü\nfunction isValidAdminRequest(req) {\n    const token = req.headers['x-api-key'];\n    return token ? verifyToken(token) : false;\n}\n// Yasaklı kelimeleri içeren basit bir liste\nconst FORBIDDEN_WORDS = [\n    // Türkçe yasaklı kelimeler\n    'küfür',\n    'hakaret',\n    'aptal',\n    'salak',\n    'mal',\n    // İngilizce yasaklı kelimeler\n    'fuck',\n    'shit',\n    'stupid',\n    'idiot',\n    'noob'\n];\nfunction containsForbiddenWords(username) {\n    const lowercaseUsername = username.toLowerCase();\n    return FORBIDDEN_WORDS.some((word)=>lowercaseUsername.includes(word));\n}\nfunction isValidUsername(username) {\n    console.log('Checking username:', username);\n    // En az 3, en fazla 20 karakter\n    if (username.length < 3 || username.length > 20) {\n        console.log('Length check failed');\n        return false;\n    }\n    // Türkçe karakterler, harf, rakam ve izin verilen noktalama işaretleri\n    const validCharactersRegex = /^[a-zA-ZğĞüÜşŞıİöÖçÇ0-9\\-_.,:;!?@#$%&*()+=]+$/;\n    if (!validCharactersRegex.test(username)) {\n        console.log('Character validation failed');\n        return false;\n    }\n    // Ardışık noktalama işareti kontrolü\n    const consecutivePunctuationRegex = /[\\-_.,:;!?@#$%&*()+=]{2,}/;\n    if (consecutivePunctuationRegex.test(username)) {\n        console.log('Consecutive punctuation check failed');\n        return false;\n    }\n    // Başlangıç ve bitiş kontrolü - noktalama işareti ile başlayıp bitemez\n    const startsOrEndsWithPunctuationRegex = /^[\\-_.,:;!?@#$%&*()+=]|[\\-_.,:;!?@#$%&*()+=]$/;\n    if (startsOrEndsWithPunctuationRegex.test(username)) {\n        console.log('Start/end punctuation check failed');\n        return false;\n    }\n    // Yasaklı kelimeler kontrolü\n    if (containsForbiddenWords(username)) {\n        console.log('Forbidden words check failed');\n        return false;\n    }\n    console.log('Username validation passed');\n    return true;\n}\nasync function handler(req, res) {\n    // CORS headers\n    res.setHeader('Access-Control-Allow-Credentials', 'true');\n    res.setHeader('Access-Control-Allow-Origin', '*');\n    res.setHeader('Access-Control-Allow-Methods', 'GET,OPTIONS,PATCH,DELETE,POST,PUT');\n    res.setHeader('Access-Control-Allow-Headers', 'X-CSRF-Token, X-Requested-With, Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version, x-api-key');\n    if (req.method === 'OPTIONS') {\n        return res.status(200).end();\n    }\n    // DELETE endpoint'i\n    if (req.method === 'DELETE') {\n        // Admin token kontrolü\n        if (!isValidAdminRequest(req)) {\n            return res.status(401).json({\n                error: 'Yetkisiz erişim'\n            });\n        }\n        try {\n            const { username } = req.query;\n            if (!username || typeof username !== 'string') {\n                return res.status(400).json({\n                    error: 'Geçersiz kullanıcı adı'\n                });\n            }\n            const result = await prisma.score.deleteMany({\n                where: {\n                    username\n                }\n            });\n            if (result.count === 0) {\n                return res.status(404).json({\n                    error: 'Kullanıcı bulunamadı'\n                });\n            }\n            return res.status(200).json({\n                message: 'Skor başarıyla silindi'\n            });\n        } catch (error) {\n            console.error('Skor silme hatası:', error);\n            return res.status(500).json({\n                error: 'Skor silinemedi'\n            });\n        }\n    }\n    if (req.method === 'POST') {\n        try {\n            const { username, score } = req.body;\n            console.log('Received request:', {\n                username,\n                score\n            });\n            if (!username || typeof username !== 'string' || typeof score !== 'number') {\n                console.log('Invalid input types:', {\n                    username,\n                    score\n                });\n                return res.status(400).json({\n                    success: false,\n                    message: 'Geçersiz kullanıcı adı veya skor',\n                    error: 'INVALID_INPUT'\n                });\n            }\n            if (!isValidUsername(username)) {\n                console.log('Username validation failed for:', username);\n                return res.status(400).json({\n                    success: false,\n                    message: 'Geçersiz kullanıcı adı formatı',\n                    error: 'INVALID_USERNAME_FORMAT'\n                });\n            }\n            // Kullanıcının en yüksek skorunu güncelle veya yeni skor ekle\n            const result = await prisma.score.upsert({\n                where: {\n                    username\n                },\n                update: {\n                    score: {\n                        set: Math.max(score, (await prisma.score.findUnique({\n                            where: {\n                                username\n                            }\n                        }))?.score || 0)\n                    }\n                },\n                create: {\n                    username,\n                    score\n                }\n            });\n            return res.status(200).json({\n                success: true,\n                message: 'Skor başarıyla kaydedildi',\n                data: result\n            });\n        } catch (error) {\n            if (error.code === 'P2002') {\n                return res.status(409).json({\n                    success: false,\n                    message: 'Bu kullanıcı adı zaten kullanımda',\n                    error: 'USERNAME_TAKEN'\n                });\n            }\n            console.error('Skor kaydetme hatası:', error);\n            return res.status(500).json({\n                success: false,\n                message: 'Skor kaydedilemedi',\n                error: 'SERVER_ERROR'\n            });\n        }\n    }\n    if (req.method === 'GET') {\n        try {\n            const scores = await prisma.score.findMany({\n                orderBy: {\n                    score: 'desc'\n                },\n                take: 100\n            });\n            return res.status(200).json(scores);\n        } catch (error) {\n            console.error('Skor listeleme hatası:', error);\n            return res.status(500).json({\n                error: 'Skorlar alınamadı'\n            });\n        }\n    }\n    // Kullanıcı adı kontrolü için yeni endpoint\n    if (req.method === 'HEAD') {\n        try {\n            const username = req.query.username;\n            if (!username || !isValidUsername(username)) {\n                return res.status(400).json({\n                    success: false,\n                    message: 'Geçersiz kullanıcı adı formatı',\n                    error: 'INVALID_USERNAME_FORMAT'\n                });\n            }\n            const result = await prisma.score.findUnique({\n                where: {\n                    username\n                }\n            });\n            if (result) {\n                return res.status(409).json({\n                    success: false,\n                    message: 'Bu kullanıcı adı zaten kullanımda',\n                    error: 'USERNAME_TAKEN'\n                });\n            }\n            return res.status(200).json({\n                success: true,\n                message: 'Kullanıcı adı kullanılabilir'\n            });\n        } catch (error) {\n            return res.status(500).json({\n                success: false,\n                message: 'Sunucu hatası',\n                error: 'SERVER_ERROR'\n            });\n        }\n    }\n    return res.status(405).json({\n        success: false,\n        message: 'Method not allowed',\n        error: 'METHOD_NOT_ALLOWED'\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cnMvY29kZWJ1ZC9EZXNrdG9wL0dhbWVQcm9qZWN0L3BhZ2VzL2FwaS9zY29yZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuXG4vLyBQcmlzbWFDbGllbnQnxLEgZ2xvYmFsIG9sYXJhayB0YW7EsW1sYXnEsW5cbmxldCBwcmlzbWE6IFByaXNtYUNsaWVudDtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgcHJpc21hID0gbmV3IFByaXNtYUNsaWVudCgpO1xufSBlbHNlIHtcbiAgaWYgKCEoZ2xvYmFsIGFzIGFueSkucHJpc21hKSB7XG4gICAgKGdsb2JhbCBhcyBhbnkpLnByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoKTtcbiAgfVxuICBwcmlzbWEgPSAoZ2xvYmFsIGFzIGFueSkucHJpc21hO1xufVxuXG5jb25zdCBKV1RfU0VDUkVUID0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCAneW91ci1zZWNyZXQta2V5JztcblxuLy8gVG9rZW4gZG/En3J1bGFtYSBmb25rc2l5b251XG5jb25zdCB2ZXJpZnlUb2tlbiA9ICh0b2tlbjogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gIHRyeSB7XG4gICAgand0LnZlcmlmeSh0b2tlbiwgSldUX1NFQ1JFVCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxuLy8gQVBJIGFuYWh0YXLEsSBrb250cm9sw7xcbmZ1bmN0aW9uIGlzVmFsaWRBZG1pblJlcXVlc3QocmVxOiBOZXh0QXBpUmVxdWVzdCk6IGJvb2xlYW4ge1xuICBjb25zdCB0b2tlbiA9IHJlcS5oZWFkZXJzWyd4LWFwaS1rZXknXSBhcyBzdHJpbmc7XG4gIHJldHVybiB0b2tlbiA/IHZlcmlmeVRva2VuKHRva2VuKSA6IGZhbHNlO1xufVxuXG4vLyBZYXNha2zEsSBrZWxpbWVsZXJpIGnDp2VyZW4gYmFzaXQgYmlyIGxpc3RlXG5jb25zdCBGT1JCSURERU5fV09SRFMgPSBbXG4gIC8vIFTDvHJrw6dlIHlhc2FrbMSxIGtlbGltZWxlclxuICAna8O8ZsO8cicsICdoYWthcmV0JywgJ2FwdGFsJywgJ3NhbGFrJywgJ21hbCcsXG4gIC8vIMSwbmdpbGl6Y2UgeWFzYWtsxLEga2VsaW1lbGVyXG4gICdmdWNrJywgJ3NoaXQnLCAnc3R1cGlkJywgJ2lkaW90JywgJ25vb2InXG5dO1xuXG5mdW5jdGlvbiBjb250YWluc0ZvcmJpZGRlbldvcmRzKHVzZXJuYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgY29uc3QgbG93ZXJjYXNlVXNlcm5hbWUgPSB1c2VybmFtZS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gRk9SQklEREVOX1dPUkRTLnNvbWUod29yZCA9PiBsb3dlcmNhc2VVc2VybmFtZS5pbmNsdWRlcyh3b3JkKSk7XG59XG5cbmZ1bmN0aW9uIGlzVmFsaWRVc2VybmFtZSh1c2VybmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnNvbGUubG9nKCdDaGVja2luZyB1c2VybmFtZTonLCB1c2VybmFtZSk7XG4gIFxuICAvLyBFbiBheiAzLCBlbiBmYXpsYSAyMCBrYXJha3RlclxuICBpZiAodXNlcm5hbWUubGVuZ3RoIDwgMyB8fCB1c2VybmFtZS5sZW5ndGggPiAyMCkge1xuICAgIGNvbnNvbGUubG9nKCdMZW5ndGggY2hlY2sgZmFpbGVkJyk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIFxuICAvLyBUw7xya8OnZSBrYXJha3RlcmxlciwgaGFyZiwgcmFrYW0gdmUgaXppbiB2ZXJpbGVuIG5va3RhbGFtYSBpxZ9hcmV0bGVyaVxuICBjb25zdCB2YWxpZENoYXJhY3RlcnNSZWdleCA9IC9eW2EtekEtWsSfxJ7DvMOcxZ/FnsSxxLDDtsOWw6fDhzAtOVxcLV8uLDo7IT9AIyQlJiooKSs9XSskLztcbiAgaWYgKCF2YWxpZENoYXJhY3RlcnNSZWdleC50ZXN0KHVzZXJuYW1lKSkge1xuICAgIGNvbnNvbGUubG9nKCdDaGFyYWN0ZXIgdmFsaWRhdGlvbiBmYWlsZWQnKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgXG4gIC8vIEFyZMSxxZ/EsWsgbm9rdGFsYW1hIGnFn2FyZXRpIGtvbnRyb2zDvFxuICBjb25zdCBjb25zZWN1dGl2ZVB1bmN0dWF0aW9uUmVnZXggPSAvW1xcLV8uLDo7IT9AIyQlJiooKSs9XXsyLH0vO1xuICBpZiAoY29uc2VjdXRpdmVQdW5jdHVhdGlvblJlZ2V4LnRlc3QodXNlcm5hbWUpKSB7XG4gICAgY29uc29sZS5sb2coJ0NvbnNlY3V0aXZlIHB1bmN0dWF0aW9uIGNoZWNrIGZhaWxlZCcpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBcbiAgLy8gQmHFn2xhbmfEscOnIHZlIGJpdGnFnyBrb250cm9sw7wgLSBub2t0YWxhbWEgacWfYXJldGkgaWxlIGJhxZ9sYXnEsXAgYml0ZW1lelxuICBjb25zdCBzdGFydHNPckVuZHNXaXRoUHVuY3R1YXRpb25SZWdleCA9IC9eW1xcLV8uLDo7IT9AIyQlJiooKSs9XXxbXFwtXy4sOjshP0AjJCUmKigpKz1dJC87XG4gIGlmIChzdGFydHNPckVuZHNXaXRoUHVuY3R1YXRpb25SZWdleC50ZXN0KHVzZXJuYW1lKSkge1xuICAgIGNvbnNvbGUubG9nKCdTdGFydC9lbmQgcHVuY3R1YXRpb24gY2hlY2sgZmFpbGVkJyk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIFxuICAvLyBZYXNha2zEsSBrZWxpbWVsZXIga29udHJvbMO8XG4gIGlmIChjb250YWluc0ZvcmJpZGRlbldvcmRzKHVzZXJuYW1lKSkge1xuICAgIGNvbnNvbGUubG9nKCdGb3JiaWRkZW4gd29yZHMgY2hlY2sgZmFpbGVkJyk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIFxuICBjb25zb2xlLmxvZygnVXNlcm5hbWUgdmFsaWRhdGlvbiBwYXNzZWQnKTtcbiAgcmV0dXJuIHRydWU7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcbiAgLy8gQ09SUyBoZWFkZXJzXG4gIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzJywgJ3RydWUnKTtcbiAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJyonKTtcbiAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsICdHRVQsT1BUSU9OUyxQQVRDSCxERUxFVEUsUE9TVCxQVVQnKTtcbiAgcmVzLnNldEhlYWRlcihcbiAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycycsXG4gICAgJ1gtQ1NSRi1Ub2tlbiwgWC1SZXF1ZXN0ZWQtV2l0aCwgQWNjZXB0LCBBY2NlcHQtVmVyc2lvbiwgQ29udGVudC1MZW5ndGgsIENvbnRlbnQtTUQ1LCBDb250ZW50LVR5cGUsIERhdGUsIFgtQXBpLVZlcnNpb24sIHgtYXBpLWtleSdcbiAgKTtcblxuICBpZiAocmVxLm1ldGhvZCA9PT0gJ09QVElPTlMnKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5lbmQoKTtcbiAgfVxuXG4gIC8vIERFTEVURSBlbmRwb2ludCdpXG4gIGlmIChyZXEubWV0aG9kID09PSAnREVMRVRFJykge1xuICAgIC8vIEFkbWluIHRva2VuIGtvbnRyb2zDvFxuICAgIGlmICghaXNWYWxpZEFkbWluUmVxdWVzdChyZXEpKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ1lldGtpc2l6IGVyacWfaW0nIH0pO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHVzZXJuYW1lIH0gPSByZXEucXVlcnk7XG4gICAgICBcbiAgICAgIGlmICghdXNlcm5hbWUgfHwgdHlwZW9mIHVzZXJuYW1lICE9PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0dlw6dlcnNpeiBrdWxsYW7EsWPEsSBhZMSxJyB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJpc21hLnNjb3JlLmRlbGV0ZU1hbnkoe1xuICAgICAgICB3aGVyZTogeyB1c2VybmFtZSB9LFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGlmIChyZXN1bHQuY291bnQgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICdLdWxsYW7EsWPEsSBidWx1bmFtYWTEsScgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdTa29yIGJhxZ9hcsSxeWxhIHNpbGluZGknIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdTa29yIHNpbG1lIGhhdGFzxLE6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdTa29yIHNpbGluZW1lZGknIH0pO1xuICAgIH1cbiAgfVxuXG4gIGlmIChyZXEubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyB1c2VybmFtZSwgc2NvcmUgfSA9IHJlcS5ib2R5O1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnUmVjZWl2ZWQgcmVxdWVzdDonLCB7IHVzZXJuYW1lLCBzY29yZSB9KTtcbiAgICAgIFxuICAgICAgaWYgKCF1c2VybmFtZSB8fCB0eXBlb2YgdXNlcm5hbWUgIT09ICdzdHJpbmcnIHx8IHR5cGVvZiBzY29yZSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0ludmFsaWQgaW5wdXQgdHlwZXM6JywgeyB1c2VybmFtZSwgc2NvcmUgfSk7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IFxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdHZcOnZXJzaXoga3VsbGFuxLFjxLEgYWTEsSB2ZXlhIHNrb3InLFxuICAgICAgICAgIGVycm9yOiAnSU5WQUxJRF9JTlBVVCdcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNWYWxpZFVzZXJuYW1lKHVzZXJuYW1lKSkge1xuICAgICAgICBjb25zb2xlLmxvZygnVXNlcm5hbWUgdmFsaWRhdGlvbiBmYWlsZWQgZm9yOicsIHVzZXJuYW1lKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ0dlw6dlcnNpeiBrdWxsYW7EsWPEsSBhZMSxIGZvcm1hdMSxJyxcbiAgICAgICAgICBlcnJvcjogJ0lOVkFMSURfVVNFUk5BTUVfRk9STUFUJ1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gS3VsbGFuxLFjxLFuxLFuIGVuIHnDvGtzZWsgc2tvcnVudSBnw7xuY2VsbGUgdmV5YSB5ZW5pIHNrb3IgZWtsZVxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJpc21hLnNjb3JlLnVwc2VydCh7XG4gICAgICAgIHdoZXJlOiB7IHVzZXJuYW1lIH0sXG4gICAgICAgIHVwZGF0ZTogeyBzY29yZTogeyBzZXQ6IE1hdGgubWF4KHNjb3JlLCAoYXdhaXQgcHJpc21hLnNjb3JlLmZpbmRVbmlxdWUoeyB3aGVyZTogeyB1c2VybmFtZSB9IH0pKT8uc2NvcmUgfHwgMCkgfSB9LFxuICAgICAgICBjcmVhdGU6IHsgdXNlcm5hbWUsIHNjb3JlIH0sXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6ICdTa29yIGJhxZ9hcsSxeWxhIGtheWRlZGlsZGknLFxuICAgICAgICBkYXRhOiByZXN1bHRcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ1AyMDAyJykgeyAvLyBVbmlxdWUgY29uc3RyYWludCBmYWlsZWRcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA5KS5qc29uKHsgXG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgbWVzc2FnZTogJ0J1IGt1bGxhbsSxY8SxIGFkxLEgemF0ZW4ga3VsbGFuxLFtZGEnLFxuICAgICAgICAgIGVycm9yOiAnVVNFUk5BTUVfVEFLRU4nXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc29sZS5lcnJvcignU2tvciBrYXlkZXRtZSBoYXRhc8SxOicsIGVycm9yKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ1Nrb3Iga2F5ZGVkaWxlbWVkaScsXG4gICAgICAgIGVycm9yOiAnU0VSVkVSX0VSUk9SJ1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIFxuICBpZiAocmVxLm1ldGhvZCA9PT0gJ0dFVCcpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2NvcmVzID0gYXdhaXQgcHJpc21hLnNjb3JlLmZpbmRNYW55KHtcbiAgICAgICAgb3JkZXJCeTogeyBzY29yZTogJ2Rlc2MnIH0sXG4gICAgICAgIHRha2U6IDEwMCxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oc2NvcmVzKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignU2tvciBsaXN0ZWxlbWUgaGF0YXPEsTonLCBlcnJvcik7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ1Nrb3JsYXIgYWzEsW5hbWFkxLEnIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIEt1bGxhbsSxY8SxIGFkxLEga29udHJvbMO8IGnDp2luIHllbmkgZW5kcG9pbnRcbiAgaWYgKHJlcS5tZXRob2QgPT09ICdIRUFEJykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1c2VybmFtZSA9IHJlcS5xdWVyeS51c2VybmFtZSBhcyBzdHJpbmc7XG4gICAgICBcbiAgICAgIGlmICghdXNlcm5hbWUgfHwgIWlzVmFsaWRVc2VybmFtZSh1c2VybmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiAnR2XDp2Vyc2l6IGt1bGxhbsSxY8SxIGFkxLEgZm9ybWF0xLEnLFxuICAgICAgICAgIGVycm9yOiAnSU5WQUxJRF9VU0VSTkFNRV9GT1JNQVQnXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcmlzbWEuc2NvcmUuZmluZFVuaXF1ZSh7XG4gICAgICAgIHdoZXJlOiB7IHVzZXJuYW1lIH0sXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDkpLmpzb24oe1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIG1lc3NhZ2U6ICdCdSBrdWxsYW7EsWPEsSBhZMSxIHphdGVuIGt1bGxhbsSxbWRhJyxcbiAgICAgICAgICBlcnJvcjogJ1VTRVJOQU1FX1RBS0VOJ1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogJ0t1bGxhbsSxY8SxIGFkxLEga3VsbGFuxLFsYWJpbGlyJ1xuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnU3VudWN1IGhhdGFzxLEnLFxuICAgICAgICBlcnJvcjogJ1NFUlZFUl9FUlJPUidcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgXG4gICAgc3VjY2VzczogZmFsc2UsXG4gICAgbWVzc2FnZTogJ01ldGhvZCBub3QgYWxsb3dlZCcsXG4gICAgZXJyb3I6ICdNRVRIT0RfTk9UX0FMTE9XRUQnXG4gIH0pO1xufSAiXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50Iiwiand0IiwicHJpc21hIiwicHJvY2VzcyIsImdsb2JhbCIsIkpXVF9TRUNSRVQiLCJlbnYiLCJ2ZXJpZnlUb2tlbiIsInRva2VuIiwidmVyaWZ5IiwiaXNWYWxpZEFkbWluUmVxdWVzdCIsInJlcSIsImhlYWRlcnMiLCJGT1JCSURERU5fV09SRFMiLCJjb250YWluc0ZvcmJpZGRlbldvcmRzIiwidXNlcm5hbWUiLCJsb3dlcmNhc2VVc2VybmFtZSIsInRvTG93ZXJDYXNlIiwic29tZSIsIndvcmQiLCJpbmNsdWRlcyIsImlzVmFsaWRVc2VybmFtZSIsImNvbnNvbGUiLCJsb2ciLCJsZW5ndGgiLCJ2YWxpZENoYXJhY3RlcnNSZWdleCIsInRlc3QiLCJjb25zZWN1dGl2ZVB1bmN0dWF0aW9uUmVnZXgiLCJzdGFydHNPckVuZHNXaXRoUHVuY3R1YXRpb25SZWdleCIsImhhbmRsZXIiLCJyZXMiLCJzZXRIZWFkZXIiLCJtZXRob2QiLCJzdGF0dXMiLCJlbmQiLCJqc29uIiwiZXJyb3IiLCJxdWVyeSIsInJlc3VsdCIsInNjb3JlIiwiZGVsZXRlTWFueSIsIndoZXJlIiwiY291bnQiLCJtZXNzYWdlIiwiYm9keSIsInN1Y2Nlc3MiLCJ1cHNlcnQiLCJ1cGRhdGUiLCJzZXQiLCJNYXRoIiwibWF4IiwiZmluZFVuaXF1ZSIsImNyZWF0ZSIsImRhdGEiLCJjb2RlIiwic2NvcmVzIiwiZmluZE1hbnkiLCJvcmRlckJ5IiwidGFrZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/scores.ts\n");

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fscores&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fscores.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();