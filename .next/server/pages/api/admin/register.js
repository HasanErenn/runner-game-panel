"use strict";(()=>{var e={};e.id=4,e.ids=[4],e.modules={1421:e=>{e.exports=require("node:child_process")},1455:e=>{e.exports=require("node:fs/promises")},1708:e=>{e.exports=require("node:process")},3024:e=>{e.exports=require("node:fs")},3139:e=>{e.exports=import("bcryptjs")},3873:e=>{e.exports=require("path")},4072:(e,r,t)=>{t.a(e,async(e,s)=>{try{t.r(r),t.d(r,{config:()=>p,default:()=>u,routeModule:()=>l});var a=t(3480),o=t(8667),n=t(6435),i=t(4618),d=e([i]);i=(d.then?(await d)():d)[0];let u=(0,n.M)(i,"default"),p=(0,n.M)(i,"config"),l=new a.PagesAPIRouteModule({definition:{kind:o.A.PAGES_API,page:"/api/admin/register",pathname:"/api/admin/register",bundlePath:"",filename:""},userland:i});s()}catch(e){s(e)}})},4618:(e,r,t)=>{t.a(e,async(e,s)=>{try{t.r(r),t.d(r,{default:()=>i});var a=t(2852),o=t(3139),n=e([o]);o=(n.then?(await n)():n)[0];let d=new a.PrismaClient;async function i(e,r){if("POST"!==e.method)return r.status(405).json({message:"Method not allowed"});try{let{username:t,password:s}=e.body;if(!t||!s)return r.status(400).json({message:"Username and password are required"});let a=await o.default.genSalt(10),n=await o.default.hash(s,a),{password:i,...u}=await d.admin.create({data:{username:t,password:n}});return r.status(201).json(u)}catch(e){if("P2002"===e.code)return r.status(400).json({message:"Username already exists"});return r.status(500).json({message:"Internal server error"})}}s()}catch(e){s(e)}})},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6698:e=>{e.exports=require("node:async_hooks")},6760:e=>{e.exports=require("node:path")},7066:e=>{e.exports=require("node:tty")},7598:e=>{e.exports=require("node:crypto")},7975:e=>{e.exports=require("node:util")},8161:e=>{e.exports=require("node:os")},8474:e=>{e.exports=require("node:events")},9021:e=>{e.exports=require("fs")}};var r=require("../../../webpack-api-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[439],()=>t(4072));module.exports=s})();